<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Unknown </title></head><body>
<h1 id="installing-mqtt-on-windows">Installing MQTT on Windows</h1>
<blockquote>
<p>Only required for students with no access to a Raspberry Pi. Partially generated by ChatGPT-4
You can also use a web-based MQTT server such as <a href="https://console.hivemq.cloud/">HiveMQ</a>, which offers a free-tier.</p>
</blockquote>
<p>To use an MQTT server on Windows using Python and the Paho library, follow these steps:</p>
<ol>
<li>
<p>Install Mosquitto MQTT Broker:
   Download the Mosquitto MQTT broker for Windows from <a href="https://mosquitto.org/download/">mosquitto.org</a> and follow the installation instructions.</p>
</li>
<li>
<p>Start Mosquitto Broker:
   After installing, open a Command Prompt, and run the command <code>mosquitto</code>. This will start the Mosquitto MQTT broker with default settings.</p>
</li>
<li>
<p>Install Python Paho-MQTT library:
   Open another Command Prompt and run <code>pip install paho-mqtt</code> to install the Paho-MQTT library for Python.</p>
</li>
<li>
<p>Create a Python script to publish a message:
   Create a file named <code>mqtt_publisher.py</code> and add the following code:</p>
</li>
</ol>
<p>```python
   import paho.mqtt.client as mqtt</p>
<p>def on_connect(client, userdata, flags, rc):
       print("Connected with result code "+str(rc))
       client.publish("test/topic", "Hello from Python Paho!")</p>
<p>client = mqtt.Client()
   client.on_connect = on_connect</p>
<p>client.connect("localhost", 1883, 60)
   client.loop_forever()
   ```</p>
<ol>
<li>Create a Python script to subscribe to a topic:
   Create a file named <code>mqtt_subscriber.py</code> and add the following code:</li>
</ol>
<p>```python
   import paho.mqtt.client as mqtt</p>
<p>def on_connect(client, userdata, flags, rc):
       print("Connected with result code "+str(rc))
       client.subscribe("test/topic")</p>
<p>def on_message(client, userdata, msg):
       print(f"{msg.topic}: {msg.payload.decode()}")</p>
<p>client = mqtt.Client()
   client.on_connect = on_connect
   client.on_message = on_message</p>
<p>client.connect("localhost", 1883, 60)
   client.loop_forever()
   ```</p>
<ol>
<li>Test the setup:
   Open two Command Prompts. In the first one, navigate to the folder containing <code>mqtt_publisher.py</code> and <code>mqtt_subscriber.py</code>. Run the subscriber script by executing <code>python mqtt_subscriber.py</code>. In the second Command Prompt, run the publisher script by executing <code>python mqtt_publisher.py</code>.</li>
</ol>
<p>You should see the message "Hello from Python Paho!" in the subscriber's Command Prompt window.</p>
</body></html>